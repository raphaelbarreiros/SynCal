# Test Design: Story 1.3

Date: 2025-09-19
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 11
- Unit tests: 3 (27%)
- Integration tests: 2 (18%)
- E2E tests: 6 (55%)
- Priority distribution: P0: 4, P1: 6, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: Dashboard renders status tiles with light/dark mode support

#### Scenarios

| ID            | Level       | Priority | Test                                                                 | Justification                                                                 |
| ------------- | ----------- | -------- | -------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| 1.3-UNIT-001  | Unit        | P1       | `StatusCard` renders title, value, description, and aria-label props | Pure component logic; fast feedback on accessibility props and placeholders   |
| 1.3-INT-001   | Integration | P1       | Dashboard page renders three status tiles with expected headings     | Validates page-level composition within Next.js layout + theme provider       |
| 1.3-E2E-001   | E2E         | P1       | Authenticated user sees three status tiles and theme toggle updates  | End-to-end confirmation with ShadCN theming + runtime theme toggle behavior   |

### AC2: Navigation includes Dashboard, Connectors, Calendars, Logs, Settings

#### Scenarios

| ID            | Level  | Priority | Test                                                                | Justification                                                             |
| ------------- | ------ | -------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| 1.3-UNIT-002  | Unit   | P1       | Nav config returns required route objects with labels and hrefs     | Keeps nav structure deterministic without rendering full layout          |
| 1.3-E2E-002   | E2E    | P0       | Keyboard user can tab through nav, links visible and labelled       | Core navigation pathway; accessibility-critical for every portal session |

### AC3: Unified calendar panel placeholder

#### Scenarios

| ID            | Level  | Priority | Test                                                                   | Justification                                                        |
| ------------- | ------ | -------- | ---------------------------------------------------------------------- | -------------------------------------------------------------------- |
| 1.3-UNIT-003  | Unit   | P2       | Empty state component renders instructional copy when list empty       | Simple guard ensuring copy not regressed during future data wiring   |
| 1.3-E2E-003   | E2E    | P1       | Dashboard shows unified calendar empty-state message for no calendars | Confirms real UI behavior with auth + shell scaffolding              |

### AC4: Responsive layout to 768px with WCAG AA contrast

#### Scenarios

| ID            | Level       | Priority | Test                                                                                 | Justification                                                                                  |
| ------------- | ----------- | -------- | ------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------- |
| 1.3-INT-002   | Integration | P1       | Layout component exposes skip link, focus outline, and responsive class contracts    | Ensures structural accessibility hooks exist before E2E; faster feedback on layout regression |
| 1.3-E2E-004   | E2E         | P0       | Viewport 768px collapses sidebar into sheet with accessible trigger + focus trapping | Prevents major UX break on tablets; high-impact responsive requirement                        |
| 1.3-E2E-005   | E2E         | P0       | Axe-core scan on dashboard (light/dark) returns no critical violations, focus order  | Directly validates WCAG AA/focus obligations                                                    |

### Task-Derived Coverage: Auth guard from Story 1.2 dependency

| ID            | Level | Priority | Test                                                                                     | Justification                                                                           |
| ------------- | ----- | -------- | ---------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------- |
| 1.3-E2E-006   | E2E   | P0       | Unauthenticated visitor redirected to `/login`; authenticated session renders shell     | Regression protection for guard requirement referenced in tasks (cross-story dependency) |

## Risk Coverage

- No dedicated risk profile yet; P0 scenarios target navigation breakage, responsive regressions, accessibility failures, and auth bypass.
- Remaining scenarios mitigate confusion from missing empty states and ensure component contracts remain stable for future data wiring.

## Recommended Execution Order

1. P0 unit/integration where available (none for unit; verify integration prerequisites) â€“ proceed to P0 E2E smoke (`1.3-E2E-002`, `1.3-E2E-004`, `1.3-E2E-005`, `1.3-E2E-006`).
2. Run remaining P1 unit tests (`1.3-UNIT-001`, `1.3-UNIT-002`), then integrations (`1.3-INT-001`, `1.3-INT-002`).
3. Execute P1 E2E flows (`1.3-E2E-001`, `1.3-E2E-003`).
4. Finish with P2 coverage (`1.3-UNIT-003`).

## Notes

- Prefer co-locating unit/integration tests with components in `apps/web/src` using React Testing Library and @testing-library/jest-dom.
- Reuse Playwright fixtures from Story 1.2 for authenticated sessions; extend viewport configuration for responsive checks.
- Store axe assertions using `@axe-core/playwright` helper to keep accessibility coverage maintainable.
